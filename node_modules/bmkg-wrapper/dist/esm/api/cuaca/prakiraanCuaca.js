"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prakiraanCuaca = void 0;
const constants_js_1 = require("../../config/constants.js");
const apiHelper_js_1 = require("../../helpers/apiHelper.js");
/**
 * Mengambil data prakiraan cuaca dalam waktu 3 hari ke depan.
 * @param kelurahan - Nama kelurahan/desa.
 * @returns Object berisi data prakiraan cuaca.
 */
const prakiraanCuaca = async (kelurahan) => {
    try {
        const parsedCsv = await (0, apiHelper_js_1.parseCsv)(constants_js_1.BASE_URL.CSV);
        const kodeWilayah = (0, apiHelper_js_1.searchKodeWilayah)(parsedCsv, kelurahan);
        if (!kodeWilayah) {
            throw new Error(`Kode wilayah untuk kelurahan "${kelurahan}" tidak ditemukan!`);
        }
        const res = await (0, apiHelper_js_1.parseWeatherData)(kodeWilayah);
        return res;
    }
    catch (err) {
        console.error('Error fetching data cuaca:', err);
        return null;
    }
};
exports.prakiraanCuaca = prakiraanCuaca;
